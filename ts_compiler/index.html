<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TypeScript Compiler</title>
  </head>
  <body>
    <textarea id="code-input" rows="10" cols="50" placeholder="Enter TypeScript code"></textarea>
    <button id="compile-button">Compile and Run</button>
    <pre id="output"></pre>

    <script src="https://unpkg.com/typescript/lib/typescript.js"></script>
    <script>
      const codeInput = document.getElementById("code-input");
      const compileButton = document.getElementById("compile-button");
      const output = document.getElementById("output");

      compileButton.addEventListener("click", () => {
        const code = codeInput.value;

        // TypeScript compilation
        const result = ts.transpileModule(code, {
          compilerOptions: {
            target: ts.ScriptTarget.ESNext,
            module: ts.ModuleKind.None,
          },
        });

        // Error handling
        if (result.diagnostics && result.diagnostics.length > 0) {
          const errorMessages = result.diagnostics
            .map((diagnostic) => {
              const message = ts.flattenDiagnosticMessageText(diagnostic.messageText, "\n");
              return `${diagnostic.file.fileName} (${diagnostic.start}): ${message}`;
            })
            .join("\n");

          output.textContent = `Compilation Error:\n${errorMessages}`;
          return;
        }

        // Execution
        try {
          eval(result.outputText);
        } catch (error) {
          output.textContent = `Runtime Error:\n${error}`;
        }
      });
    </script>
  </body>
</html>
